


<form>
	<input type="text" name="search-term">
	<input type="submit" name="search">

</form>

<div id="results">
<!-- <p id=ptag></p> -->
	

</div>

<div id=movie-details>
</div>




<script>

	document.getElementById("ptag").addEventListener('click', function(event){

		var div1 = document.getElementById("ptag");
		var align = div1.getAttribute("imdbid");
		console.log(align)


		var getMovieDetails = new XMLHttpRequest();
		// getMovieDetails.addEventListener("load", function(event){
		// 	var movie_details = JSON.parse(event.currentTarget.response)
		// 	console.log(movie_details)

		// })

		getMovieDetails.open("GET", "http://www.omdbapi.com/?t=stars&plot=full")
		getMovieDetails.send()
		})






	document.querySelector('input[type=submit]').addEventListener('click', function(event){
		event.preventDefault();
		search_term = document.querySelector('input[name=search-term]').value
		var getResults = new XMLHttpRequest();
		getResults.addEventListener("load", function(event){
			var results = JSON.parse(event.currentTarget.response).Search
			var list_array = results
			for (var i = 0; i < list_array.length; i++) {
			var titles = results[i].Title
			var years = results[i].Year
			var imdbID = results[i].imdbID
			document.getElementById("results").innerHTML += '<p id=ptag imdbid=' + imdbID + ' > Title: ' + titles ; + '</p>'
			document.getElementById("results").innerHTML += 'Year: ' + years ;
			document.getElementById("ptag").setAttribute('imdbid', imdbID);


			console.log(results)
    	}

			// document.getElementById("results").innerHTML += '<p>' + results.Search.Title; + '</p>'
			// document.getElementById("results").innerHTML += results.Search.Year;	


		});
		getResults.open("GET", "http://www.omdbapi.com/?type=movie&s=" + search_term);
		getResults.send()
	})

	




</script>
